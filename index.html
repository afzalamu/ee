<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GATE EE Preparation Tracker ‚Äî My Version</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
  /* Custom tweaks */
  .glow {
    box-shadow: 0 6px 20px rgba(156,163,175,0.15), 0 2px 4px rgba(0,0,0,0.05);
  }
  .topic-label { user-select: none; }
</style>
</head>
<body class="bg-gradient-to-br from-gray-100 via-gray-50 to-gray-200 min-h-screen p-6 font-sans">
<div class="max-w-5xl mx-auto">
  <header class="mb-6">
    <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800">üß≠ GATE EE Preparation Tracker <span class="text-indigo-600">‚Äî My Tracker</span></h1>
    <p class="text-sm text-gray-500 mt-1">Track Syllabus, Previous Year Questions & Test Series. Progress auto-saved to your browser.</p>
  </header>

  <!-- Controls -->
  <div class="flex flex-col md:flex-row gap-3 items-stretch md:items-center justify-between mb-5">
    <div class="flex gap-3 items-center">
      <button id="resetBtn" class="px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded shadow-sm">Reset Progress</button>
      <button id="exportBtn" class="px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded shadow-sm">Export Progress</button>
      <label class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded cursor-pointer shadow-sm">
        Import <input id="importFile" type="file" accept="application/json" class="hidden" />
      </label>
    </div>

    <div class="flex items-center gap-3">
      <div class="text-sm text-gray-600">Total Completion:</div>
      <div class="w-64 bg-gray-300 h-6 rounded-full overflow-hidden glow">
        <div id="bar-total" class="h-6 rounded-full" style="width:0%; background: linear-gradient(90deg,#34d399,#3b82f6,#a78bfa)"></div>
      </div>
      <div id="total-percent" class="ml-2 text-sm font-medium text-gray-800">0%</div>
    </div>
  </div>

  <main class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Left: Sections -->
    <section class="space-y-6 md:col-span-2">
      <!-- Section 1 -->
      <article class="bg-white p-4 rounded-lg shadow-sm glow">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-blue-700">Section 1 ‚Äî Syllabus Completion <span id="sec1-num" class="text-gray-500 font-medium ml-2">60%</span></h2>
          <div class="w-48 bg-gray-200 h-4 rounded-full overflow-hidden">
            <div id="bar-sec1" class="h-4 rounded-full" style="width:0%; background: linear-gradient(90deg,#60a5fa,#3b82f6)"></div>
          </div>
        </div>

        <!-- Topics list (same content) -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
          <!-- Network Analysis (6%) -->
          <fieldset class="border rounded p-2">
            <legend class="px-2 font-medium">Network Analysis (6%)</legend>
            <ul class="mt-2 space-y-1 text-sm">
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="1.5">Basics of Networks & Network Theorems ‚Äî 1.5%</label></li>
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="1.75">Transient Analysis ‚Äî 1.75%</label></li>
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="0.5">Phasor Diagram ‚Äî 0.5%</label></li>
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="0.5">Resonance ‚Äî 0.5%</label></li>
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="0.5">Complex Power ‚Äî 0.5%</label></li>
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="1.0">Two Port Networks ‚Äî 1%</label></li>
              <li><label class="flex items-center gap-2 topic-label"><input type="checkbox" class="sec1-topic" data-weight="0.25">3-Phase & Magnetically Coupled ‚Äî 0.25%</label></li>
            </ul>
          </fieldset>

          <!-- The rest of topics (Signals & Systems, Analog, Digital, Control, etc.) can remain exactly the same -->
        </div>
      </article>

      <!-- Section 2 & 3 (Previous Year Questions & Test Series) -->
      <!-- Keep the content and functionality the same but you can adjust bar colors -->
    </section>

    <!-- Right: Summary & Chart -->
    <aside class="space-y-6">
      <div class="bg-white p-4 rounded-lg shadow-sm glow">
        <h3 class="font-semibold mb-2">Quick Summary</h3>
        <ul class="text-sm text-gray-600 space-y-1">
          <li>Section 1 target weight: <strong>60%</strong></li>
          <li>Section 2 target weight: <strong>20%</strong></li>
          <li>Section 3 target weight: <strong>20%</strong></li>
          <li>Total possible: <strong>100%</strong></li>
        </ul>
      </div>

      <div class="bg-white p-4 rounded-lg shadow-sm glow">
        <h3 class="font-semibold mb-3">Overall Progress</h3>
        <canvas id="overallChart" width="300" height="300"></canvas>
        <div class="mt-3 text-sm text-gray-600">Green = Completed, Gray = Remaining</div>
      </div>

      <div class="bg-white p-4 rounded-lg shadow-sm glow">
        <h3 class="font-semibold mb-2">Tip</h3>
        <ol class="list-decimal list-inside text-sm text-gray-600 space-y-1">
          <li>Use the Export button before changing devices.</li>
        </ol>
      </div>
    </aside>
  </main>

  <!-- Footer -->
  <footer class="mt-8 text-center text-gray-400">
    Made with ‚ù§Ô∏è for personal GATE EE preparation.
  </footer>
</div>

<script>
/* ---------- Utility & state ---------- */
const sections = [
  { id: 'sec1', selector: '.sec1-topic' , target: 60 },
  { id: 'sec2', selector: '.sec2-topic' , target: 20 },
  { id: 'sec3', selector: '.sec3-topic' , target: 20 }
];

function toFixedTrim(n){ return (Math.round(n*100)/100).toFixed(2).replace(/\.00$/, ''); }

/* ---------- Load / Save state helpers ---------- */
function saveState() {
  const obj = {};
  sections.forEach(sec => {
    const nodes = document.querySelectorAll(sec.selector);
    nodes.forEach((cb, i) => obj[`${sec.id}_${i}`] = cb.checked);
  });
  localStorage.setItem('myPrepTracker', JSON.stringify(obj));
}

function loadState() {
  const raw = localStorage.getItem('myPrepTracker');
  if(!raw) return;
  try{
    const obj = JSON.parse(raw);
    sections.forEach(sec => {
      const nodes = document.querySelectorAll(sec.selector);
      nodes.forEach((cb, i) => {
        const val = obj.hasOwnProperty(`${sec.id}_${i}`) ? obj[`${sec.id}_${i}`] : cb.checked;
        cb.checked = !!val;
      });
    });
  }catch(e){ console.warn('Failed to parse saved state', e); }
}

/* ---------- Progress calculation ---------- */
function calcSectionProgress(sec) {
  const nodes = document.querySelectorAll(sec.selector);
  let sum = 0;
  nodes.forEach(cb => {
    if(cb.checked) sum += parseFloat(cb.dataset.weight || 0);
  });
  return Math.min(sum, sec.target);
}

function updateAll() {
  let total = 0;
  sections.forEach(sec => {
    const val = calcSectionProgress(sec);
    total += val;
    document.getElementBy
